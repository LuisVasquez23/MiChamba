@using MiChamba.ViewModel;
@using MiChamba.Models;

@{
    ViewData["Title"] = "Perfil Profesional";
    Layout = "~/Views/Shared/_UsuarioLayout.cshtml";

    Curriculum curriculum = ViewBag.curriculum;
}

<style>
    .custom-file-input {
        opacity: 0;
        position: absolute;
        z-index: -1;
    }

    .custom-file-label {
        display: inline-block;
        cursor: pointer;
    }


    .btn-secondy{
        background: #acacbe;
        color:black;
        font-weight:bold;
    }
</style>

<div class="bg-dark rounded p-4" >
    <div class="container">
        <div class="row">
            <div class="col-lg-12 p-3">
                <h3 class="text-white mb-3">Mi perfil</h3>
                <div class="d-flex justify-content-center  ">
                    <div class="rounded bg-white w-100">
                        <div class="row p-4 w-100">

                            <div class="col-md-6 rounded shadow" >
                                <div class="text-center p-2">
                                    <img src="~/uploads/img/@ViewBag.foto" class="img-fluid rounded" style="max-width:150px;" alt="">
                                    <h5 class="pt-2">Paolo Navarro</h5>
                                </div>
                            </div>

                            <div class="col-md-6 pt-3">
                                <div class="row d-flex mt-2">
                                    <div class="col-md-6">
                                        <a asp-action="ModificacionPerfil" class="btn btn-primary w-100" >
                                            <i class="fas fa-edit"></i>
                                            Editar perfil
                                        </a>
                                    </div>
                                </div>
                                <div class="row d-flex mt-2">
                                    <div class="col-md-6">
                                        <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#uploadModal">
                                            <i class="far fa-file-pdf pdf-icon"></i> Subir CV
                                        </button>
                                    </div>
                                </div>
                                <div class="row d-flex mt-2">
                                    <div class="col-md-6">
                                        @{
                                            if (curriculum != null)
                                            {
                                                <a href="~/uploads/pdf/@curriculum.NombreArchivo" class="btn btn-primary w-100" target="_blank">
                                                    <i class="fas fa-eye"></i> Ver CV
                                                </a>
                                            }
                                            else{
                                                <input type="text" value="Ver CV" class="btn btn-secondy w-100" readonly />
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>

<!-- Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-muted" id="uploadModalLabel">Subir curriculum</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <form asp-action="RegistrarCV" method="post" enctype="multipart/form-data">
          <div class="modal-body">

                <input type="file" class="custom-file-input" id="customFile" name="PdfFile" accept=".pdf">
                <label class="custom-file-label btn btn-primary w-100" for="customFile">
                    Cargar CV <i class="far fa-file-pdf pdf-icon"></i>
                </label>

       
          </div>
          <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <input type="submit" class="btn btn-primary" value="Subir">
          </div>
       </form>
    </div>
  </div>
</div>